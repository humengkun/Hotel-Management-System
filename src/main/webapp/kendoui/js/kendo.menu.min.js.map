{"version":3,"sources":["kendo.menu.js"],"names":["f","define","$","undefined","getEffectDirection","direction","root","split","replace","parseDirection","isRtl","output","origin","position","horizontal","test","kendo","directions","reverse","join","contains","parent","child","e","updateItemClasses","item","addClass","children","IMG","IMAGE","LINK","filter","DEFAULTSTATE","empty","append","DISABLEDSTATE","removeAttr","attr","length","contents","this","nodeName","match","excludedNodesRegExp","nodeType","trim","nodeValue","wrapAll","updateArrow","updateFirstLast","find","remove","each","arrowCssClass","getArrowCssClass","support","hasClass","MENU","removeClass","FIRST","LAST","updateHasAriaPopup","parents","index","parentLi","eq","getParentLiItems","group","parentsUntil","storeItemSelectEventHandler","element","options","selectHandler","getItemSelectEventHandler","setItemData","items","i","data","select","isFunction","popupOpenerSelector","id","popupGroupSelector","getChildPopups","currentPopup","overflowWrapper","childPopupOpener","result","opener","popupId","popup","POPUP_OPENER_ATTR","push","popupParentItem","popupElement","POPUP_ID_ATTR","itemPopup","animationContainerSelector","overflowMenuParents","current","last","getParents","parentNode","is","elem","mousewheelDelta","delta","wheelDelta","Math","ceil","floor","detail","round","parentsScroll","scrollDirection","scroll","isNaN","isPointerTouch","allPointers","originalEvent","pointerType","touchPointerTypes","isTouch","ev","touch","type","removeSpacesBetweenItems","ul","ContextMenu","window","ui","activeElement","_activeElement","mobileOS","MOUSEDOWN","CLICK","DELAY","SCROLLSPEED","extend","proxy","template","keys","Widget","NS","OPEN","CLOSE","TIMER","SELECT","ZINDEX","ACTIVATE","DEACTIVATE","POINTERDOWN","pointers","msPointers","MOUSEENTER","MOUSELEAVE","MOUSEWHEEL","RESIZE","resize","SCROLLWIDTH","SCROLLHEIGHT","OFFSETWIDTH","OFFSETHEIGHT","DOCUMENT_ELEMENT","document","documentElement","KENDOPOPUP","HOVERSTATE","FOCUSEDSTATE","SELECTEDSTATE","menuSelector","groupSelector","popupSelector","allItemsSelector","disabledSelector","itemSelector","availableItemsSelector","linkSelector","exclusionSelector","nextSelector","lastSelector","templateSelector","scrollButtonSelector","2","templates","content","itemWrapper","scrollButton","image","arrow","sprite","rendering","wrapperCssClass","enabled","firstLevel","cssClass","hasOwnProperty","selected","itemCssAttributes","attributes","imageCssAttributes","imageAttr","contentCssAttributes","contentAttr","defaultClasses","textClass","textAttributes","url","arrowClass","text","encoded","htmlEncode","tag","groupAttributes","expanded","groupCssClass","Menu","init","that","fn","call","wrapper","_updateClasses","_initData","_animations","nextItemZIndex","_tabindex","_initOverflow","_attachMenuEventsHandlers","openOnClick","clicked","_ariaId","format","notify","events","name","animation","open","duration","close","orientation","closeOnClick","hoverDelay","scrollable","popupCollision","dataSource","angular","elements","_overflowWrapper","on","_focusHandler","_click","_preventClose","_mouseenter","_mouseleave","_mousedown","_toggleHover","_keydown","_focus","_removeHoverItem","_checkActiveElement","_mouseleavePopup","_mouseenterPopup","_documentClickHandler","_documentClick","click","_detachMenuEventsHandlers","off","unbind","backwardBtn","forwardBtn","initialWidth","initialCssWidth","isHorizontal","_openedPopups","_scrollWrapper","wrap","add","appendTo","_initScrolling","outerWidth","style","width","throttle","_setOverflowWrapperWidth","_toggleScrollButtons","_popupsWrapper","wrapperWidth","menuWidth","borders","wrapperCssWidth","css","offsetWidth","clientWidth","min","_reinitOverflow","overflowChanged","distance","_destroyOverflow","popupWrapper","popupParentLi","unwrap","scrollElement","isNumeric","mouseWheelDistance","backward","forward","backwardDouble","forwardDouble","scrolling","touchEvents","value","scrollValue","scrollLeft","scrollTop","finish","animate","mouseenterHandler","mousedownHandler","stop","currentTarget","trigger","stopPropagation","preventDefault","eventMap","down","scrollSpeed","ctrlKey","shiftKey","altKey","abs","_closeChildPopups","currentScroll","scrollSize","offset","toggle","setOptions","destroy","enable","_toggleDisabled","disable","referenceItem","inserted","_insert","insertBefore","before","insertAfter","after","groups","plain","groupData","isPlainObject","renderGroup","isArray","map","idx","get","renderItem","charAt","parentItems","container","li","clearTimeout","setTimeout","overflowPopup","windowHeight","setScrolling","nextZindex","parentHorizontal","effects","openEffects","_getPopup","_triggerEvent","height","maxHeight","_outerHeight","getShadows","bottom","overflow","browser","msie","version","siblings","zIndex","kendoPopup","activate","deactivate","sender","removeData","opacity","collision","anchor","_popupOpen","hide","_configurePopupOverflow","_hovered","_initPopupScrolling","popupOpener","groupId","_wrapPopupElement","Date","getTime","autosize","display","skipMouseEvents","scrollHeight","offsetHeight","_initPopupScrollButtons","scrollButtons","timeout","p","isEmptyObject","_closeParentPopups","first","_keyTriggered","_setPopupHeight","isFixed","location","popupOuterHeight","popupOffsetTop","bottomScrollbar","canFit","popups","_initialHeight","_location","max","top","innerHeight","dontClearClose","hasChildPopupsHovered","isPopupMouseLeaved","_isRootItem","_forceClose","toggleClass","target","eventTarget","closest","isEnter","indexOf","_closurePrevented","hoverItem","_hoverItem","_findRootParent","hasFocus","oldHoverItem","_oldHoverItem","nonContentGroupsSelector","matchesSelector","end","hasChildren","_itemHasChildren","pointerTouch","delegateTarget","rootMenuItems","subMenuItems","relatedTarget","_","sibling","$window","stopImmediatePropagation","toElement","clientX","clientY","_closePopups","rootPopup","groupParent","innerPopup","_innerPopup","openHandle","childGroup","childGroupVisible","shouldCloseTheRootItem","childPopupId","targetElement","toUpperCase","formNode","link","itemElement","href","targetHref","sampleHref","isLink","isLocalLink","isTargetLink","handled","_triggerSelect","_parentsUntil","enterKey","context","selector","itemSelectEventData","isSelectItemDefaultPrevented","isSelectDefaultPrevented","_getEventData","isDefaultPrevented","eventData","_defaultPrevented","active","_moveHover","focus","belongsToVertical","key","keyCode","ESC","_itemBelongsToVertival","RIGHT","LEFT","DOWN","_itemDown","UP","_itemUp","HOME","END","_itemEsc","ENTER","SPACEBAR","_childPopupElement","TAB","menuIsVertical","nextItem","_scrollToItem","_itemRight","parentItem","nextAll","prevAll","_itemLeft","scrollDir","getSize","currentScrollOffset","itemSize","itemOffset","ulSize","scrollButtonSize","itemPosition","_outerWidth","menu","imageUrl","spriteCssClass","renderContent","subGroup","renderItems","html","len","_marker","guid","substring","_popup","_wire","_initialWidth","showOn","alignToAnchor","_showProxy","userEvents","mousedown","_closeProxy","x","y","visible","kendoStop","left","_configurePopupScrolling","downEvent","_mousedownProxy","visibility","_setPopupWidth","windowWidth","popupOuterWidth","popupOffsetLeft","shadow","maxWidth","right","arguments","_closeTimeoutProxy","_showHandler","event","pageX","pageY","_eventOrigin","_targetChild","_closeHandler","normalClick","sameTarget","containment","which","bind","UserEvents","allowSelection","_triggerProxy","copyAnchorStyles","noop","plugin","jQuery","amd","a1","a2","a3"],"mappings":"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","file":"kendo.menu.min.js","sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('kendo.menu', ['kendo.popup'], f);\n}(function () {\n    var __meta__ = {\n        id: 'menu',\n        name: 'Menu',\n        category: 'web',\n        description: 'The Menu widget displays hierarchical data as a multi-level menu.',\n        depends: ['popup']\n    };\n    (function ($, undefined) {\n        var kendo = window.kendo, ui = kendo.ui, activeElement = kendo._activeElement, touch = kendo.support.touch && kendo.support.mobileOS, MOUSEDOWN = 'mousedown', CLICK = 'click', DELAY = 30, SCROLLSPEED = 50, extend = $.extend, proxy = $.proxy, each = $.each, template = kendo.template, keys = kendo.keys, Widget = ui.Widget, excludedNodesRegExp = /^(ul|a|div)$/i, NS = '.kendoMenu', IMG = 'img', OPEN = 'open', MENU = 'k-menu', LINK = 'k-link', LAST = 'k-last', CLOSE = 'close', TIMER = 'timer', FIRST = 'k-first', IMAGE = 'k-image', SELECT = 'select', ZINDEX = 'zIndex', ACTIVATE = 'activate', DEACTIVATE = 'deactivate', POINTERDOWN = 'touchstart' + NS + ' MSPointerDown' + NS + ' pointerdown' + NS, pointers = kendo.support.pointers, msPointers = kendo.support.msPointers, allPointers = msPointers || pointers, MOUSEENTER = pointers ? 'pointerenter' : msPointers ? 'MSPointerEnter' : 'mouseenter', MOUSELEAVE = pointers ? 'pointerleave' : msPointers ? 'MSPointerLeave' : 'mouseleave', MOUSEWHEEL = 'DOMMouseScroll' + NS + ' mousewheel' + NS, RESIZE = kendo.support.resize + NS, SCROLLWIDTH = 'scrollWidth', SCROLLHEIGHT = 'scrollHeight', OFFSETWIDTH = 'offsetWidth', OFFSETHEIGHT = 'offsetHeight', POPUP_ID_ATTR = 'group', POPUP_OPENER_ATTR = 'groupparent', DOCUMENT_ELEMENT = $(document.documentElement), KENDOPOPUP = 'kendoPopup', DEFAULTSTATE = 'k-state-default', HOVERSTATE = 'k-state-hover', FOCUSEDSTATE = 'k-state-focused', DISABLEDSTATE = 'k-state-disabled', SELECTEDSTATE = 'k-state-selected', menuSelector = '.k-menu', groupSelector = '.k-menu-group', animationContainerSelector = '.k-animation-container', popupSelector = groupSelector + ',' + animationContainerSelector, allItemsSelector = ':not(.k-list) > .k-item', disabledSelector = '.k-item.k-state-disabled', itemSelector = '.k-item', availableItemsSelector = '.k-item:not(.k-state-disabled)', linkSelector = '.k-item:not(.k-state-disabled) > .k-link', exclusionSelector = ':not(.k-item.k-separator)', nextSelector = itemSelector + exclusionSelector + ':eq(0)', lastSelector = itemSelector + exclusionSelector + ':last', templateSelector = 'div:not(.k-animation-container,.k-list-container)', scrollButtonSelector = '.k-menu-scroll-button', touchPointerTypes = {\n                '2': 1,\n                'touch': 1\n            }, templates = {\n                content: template('<div #= contentCssAttributes(item) # tabindex=\\'-1\\'>#= content(item) #</div>'),\n                group: template('<ul class=\\'#= groupCssClass(group) #\\'#= groupAttributes(group) # role=\\'menu\\' aria-hidden=\\'true\\'>' + '#= renderItems(data) #' + '</ul>'),\n                itemWrapper: template('<#= tag(item) # class=\\'#= textClass(item) #\\'#= textAttributes(item) #>' + '#= image(data) ##= sprite(item) ##= text(item) #' + '#= arrow(data) #' + '</#= tag(item) #>'),\n                item: template('<li class=\\'#= wrapperCssClass(group, item) #\\' #= itemCssAttributes(item) # role=\\'menuitem\\'  #=item.items ? \"aria-haspopup=\\'true\\'\": \"\"#' + '#=item.enabled === false ? \"aria-disabled=\\'true\\'\" : \\'\\'#>' + '#= itemWrapper(data) #' + '# if (item.items) { #' + '#= subGroup({ items: item.items, menu: menu, group: { expanded: item.expanded } }) #' + '# } else if (item.content || item.contentUrl) { #' + '#= renderContent(data) #' + '# } #' + '</li>'),\n                scrollButton: template('<span class=\\'k-button k-button-icon k-menu-scroll-button k-scroll-#= direction #\\' unselectable=\\'on\\'>' + '<span class=\\'k-icon k-i-arrow-60-#= direction #\\'></span></span>'),\n                image: template('<img #= imageCssAttributes(item) # alt=\\'\\' src=\\'#= item.imageUrl #\\' />'),\n                arrow: template('<span class=\\'#= arrowClass(item, group) #\\'></span>'),\n                sprite: template('<span class=\\'k-sprite #= spriteCssClass #\\'></span>'),\n                empty: template('')\n            }, rendering = {\n                wrapperCssClass: function (group, item) {\n                    var result = 'k-item', index = item.index;\n                    if (item.enabled === false) {\n                        result += ' k-state-disabled';\n                    } else {\n                        result += ' k-state-default';\n                    }\n                    if (group.firstLevel && index === 0) {\n                        result += ' k-first';\n                    }\n                    if (index == group.length - 1) {\n                        result += ' k-last';\n                    }\n                    if (item.cssClass) {\n                        result += ' ' + item.cssClass;\n                    }\n                    if (item.attr && item.attr.hasOwnProperty('class')) {\n                        result += ' ' + item.attr['class'];\n                    }\n                    if (item.selected) {\n                        result += ' ' + SELECTEDSTATE;\n                    }\n                    return result;\n                },\n                itemCssAttributes: function (item) {\n                    var result = '';\n                    var attributes = item.attr || {};\n                    for (var attr in attributes) {\n                        if (attributes.hasOwnProperty(attr) && attr !== 'class') {\n                            result += attr + '=\"' + attributes[attr] + '\" ';\n                        }\n                    }\n                    return result;\n                },\n                imageCssAttributes: function (item) {\n                    var result = '';\n                    var attributes = item.imageAttr || {};\n                    if (!attributes['class']) {\n                        attributes['class'] = IMAGE;\n                    } else {\n                        attributes['class'] += ' ' + IMAGE;\n                    }\n                    for (var attr in attributes) {\n                        if (attributes.hasOwnProperty(attr)) {\n                            result += attr + '=\"' + attributes[attr] + '\" ';\n                        }\n                    }\n                    return result;\n                },\n                contentCssAttributes: function (item) {\n                    var result = '';\n                    var attributes = item.contentAttr || {};\n                    var defaultClasses = 'k-content k-group k-menu-group';\n                    if (!attributes['class']) {\n                        attributes['class'] = defaultClasses;\n                    } else {\n                        attributes['class'] += ' ' + defaultClasses;\n                    }\n                    for (var attr in attributes) {\n                        if (attributes.hasOwnProperty(attr)) {\n                            result += attr + '=\"' + attributes[attr] + '\" ';\n                        }\n                    }\n                    return result;\n                },\n                textClass: function () {\n                    return LINK;\n                },\n                textAttributes: function (item) {\n                    return item.url ? ' href=\\'' + item.url + '\\'' : '';\n                },\n                arrowClass: function (item, group) {\n                    var result = 'k-icon';\n                    if (group.horizontal) {\n                        result += ' k-i-arrow-60-down';\n                    } else {\n                        result += ' k-i-arrow-60-right';\n                    }\n                    return result;\n                },\n                text: function (item) {\n                    return item.encoded === false ? item.text : kendo.htmlEncode(item.text);\n                },\n                tag: function (item) {\n                    return item.url ? 'a' : 'span';\n                },\n                groupAttributes: function (group) {\n                    return group.expanded !== true ? ' style=\\'display:none\\'' : '';\n                },\n                groupCssClass: function () {\n                    return 'k-group k-menu-group';\n                },\n                content: function (item) {\n                    return item.content ? item.content : '&nbsp;';\n                }\n            };\n        function getEffectDirection(direction, root) {\n            direction = direction.split(' ')[!root + 0] || direction;\n            return direction.replace('top', 'up').replace('bottom', 'down');\n        }\n        function parseDirection(direction, root, isRtl) {\n            direction = direction.split(' ')[!root + 0] || direction;\n            var output = {\n                    origin: [\n                        'bottom',\n                        isRtl ? 'right' : 'left'\n                    ],\n                    position: [\n                        'top',\n                        isRtl ? 'right' : 'left'\n                    ]\n                }, horizontal = /left|right/.test(direction);\n            if (horizontal) {\n                output.origin = [\n                    'top',\n                    direction\n                ];\n                output.position[1] = kendo.directions[direction].reverse;\n            } else {\n                output.origin[0] = direction;\n                output.position[0] = kendo.directions[direction].reverse;\n            }\n            output.origin = output.origin.join(' ');\n            output.position = output.position.join(' ');\n            return output;\n        }\n        function contains(parent, child) {\n            try {\n                return $.contains(parent, child);\n            } catch (e) {\n                return false;\n            }\n        }\n        function updateItemClasses(item) {\n            item = $(item);\n            item.addClass('k-item').children(IMG).addClass(IMAGE);\n            item.children('a').addClass(LINK).children(IMG).addClass(IMAGE);\n            item.filter(':not([disabled])').addClass(DEFAULTSTATE);\n            item.filter('.k-separator').empty().append('&nbsp;');\n            item.filter('li[disabled]').addClass(DISABLEDSTATE).removeAttr('disabled').attr('aria-disabled', true);\n            if (!item.filter('[role]').length) {\n                item.attr('role', 'menuitem');\n            }\n            if (!item.children('.' + LINK).length) {\n                item.contents().filter(function () {\n                    return !this.nodeName.match(excludedNodesRegExp) && !(this.nodeType == 3 && !$.trim(this.nodeValue));\n                }).wrapAll('<span class=\\'' + LINK + '\\'/>');\n            }\n            updateArrow(item);\n            updateFirstLast(item);\n        }\n        function updateArrow(item) {\n            item = $(item);\n            item.find('> .k-link > [class*=k-i-arrow-60]:not(.k-sprite)').remove();\n            item.filter(':has(.k-menu-group)').children('.k-link:not(:has([class*=k-i-arrow]:not(.k-sprite)))').each(function () {\n                var item = $(this), arrowCssClass = getArrowCssClass(item);\n                item.append('<span class=\\'k-icon' + arrowCssClass + ' k-menu-expand-arrow\\'/>');\n            });\n        }\n        function getArrowCssClass(item) {\n            var arrowCssClass, parent = item.parent().parent(), isRtl = kendo.support.isRtl(parent);\n            if (parent.hasClass(MENU + '-horizontal')) {\n                arrowCssClass = ' k-i-arrow-60-down';\n            } else {\n                if (isRtl) {\n                    arrowCssClass = ' k-i-arrow-60-left';\n                } else {\n                    arrowCssClass = ' k-i-arrow-60-right';\n                }\n            }\n            return arrowCssClass;\n        }\n        function updateFirstLast(item) {\n            item = $(item);\n            item.filter('.k-first:not(:first-child)').removeClass(FIRST);\n            item.filter('.k-last:not(:last-child)').removeClass(LAST);\n            item.filter(':first-child').addClass(FIRST);\n            item.filter(':last-child').addClass(LAST);\n        }\n        function updateHasAriaPopup(parents) {\n            if (parents && parents.length) {\n                for (var index in parents) {\n                    var parentLi = parents.eq(index);\n                    if (parentLi.find('ul').length) {\n                        parentLi.attr('aria-haspopup', true);\n                    } else {\n                        parentLi.removeAttr('aria-haspopup');\n                    }\n                }\n            }\n        }\n        function getParentLiItems(group) {\n            if (!group.hasClass(MENU)) {\n                return group.parentsUntil('.' + MENU, 'li');\n            }\n        }\n        function storeItemSelectEventHandler(element, options) {\n            var selectHandler = getItemSelectEventHandler(options);\n            if (selectHandler) {\n                setItemData(element, selectHandler);\n            }\n            if (options.items) {\n                $(element).children('ul').children('li').each(function (i) {\n                    storeItemSelectEventHandler(this, options.items[i]);\n                });\n            }\n        }\n        function setItemData(element, selectHandler) {\n            $(element).children('.k-link').data({ selectHandler: selectHandler });\n        }\n        function getItemSelectEventHandler(options) {\n            var selectHandler = options.select, isFunction = kendo.isFunction;\n            if (selectHandler && isFunction(selectHandler)) {\n                return selectHandler;\n            }\n            return null;\n        }\n        function popupOpenerSelector(id) {\n            return id ? 'li[data-groupparent=\\'' + id + '\\']' : 'li[data-groupparent]';\n        }\n        function popupGroupSelector(id) {\n            return id ? 'ul[data-group=\\'' + id + '\\']' : 'ul[data-group]';\n        }\n        function getChildPopups(currentPopup, overflowWrapper) {\n            var childPopupOpener = currentPopup.find(popupOpenerSelector());\n            var result = [];\n            childPopupOpener.each(function (i, opener) {\n                opener = $(opener);\n                var popupId = opener.data(POPUP_OPENER_ATTR);\n                var popup = currentPopup;\n                while (popupId) {\n                    popup = overflowWrapper.find(popupGroupSelector(popupId) + ':visible');\n                    if (popup.length) {\n                        result.push(popup);\n                    }\n                    opener = popup.find(popupOpenerSelector());\n                    popupId = opener.data(POPUP_OPENER_ATTR);\n                }\n            });\n            return result;\n        }\n        function popupParentItem(popupElement, overflowWrapper) {\n            var popupId = popupElement.data(POPUP_ID_ATTR);\n            return popupId ? overflowWrapper.find(popupOpenerSelector(popupId)) : $([]);\n        }\n        function itemPopup(item, overflowWrapper) {\n            var popupId = item.data(POPUP_OPENER_ATTR);\n            return popupId ? overflowWrapper.children(animationContainerSelector).children(popupGroupSelector(popupId)) : $([]);\n        }\n        function overflowMenuParents(current, overflowWrapper) {\n            var parents = [];\n            var getParents = function (item) {\n                while (item.parentNode && !overflowWrapper.is(item.parentNode)) {\n                    parents.push(item.parentNode);\n                    item = item.parentNode;\n                }\n            };\n            var elem = current[0] || current;\n            getParents(elem);\n            var last = parents[parents.length - 1];\n            while ($(last).is(animationContainerSelector)) {\n                var popupElement = $(last).children('ul');\n                elem = popupParentItem(popupElement, overflowWrapper)[0];\n                if (!elem) {\n                    break;\n                }\n                parents.push(elem);\n                getParents(elem);\n                last = parents[parents.length - 1];\n            }\n            return parents;\n        }\n        function mousewheelDelta(e) {\n            var delta = 0;\n            if (e.wheelDelta) {\n                delta = -e.wheelDelta / 120;\n                delta = delta > 0 ? Math.ceil(delta) : Math.floor(delta);\n            }\n            if (e.detail) {\n                delta = Math.round(e.detail / 3);\n            }\n            return delta;\n        }\n        function parentsScroll(current, scrollDirection) {\n            var scroll = 0;\n            var parent = current.parentNode;\n            while (parent && !isNaN(parent[scrollDirection])) {\n                scroll += parent[scrollDirection];\n                parent = parent.parentNode;\n            }\n            return scroll;\n        }\n        function isPointerTouch(e) {\n            return allPointers && e.originalEvent && e.originalEvent.pointerType in touchPointerTypes;\n        }\n        function isTouch(e) {\n            var ev = e.originalEvent;\n            return touch && /touch/i.test(ev.type || '');\n        }\n        function removeSpacesBetweenItems(ul) {\n            ul.contents().filter(function () {\n                return this.nodeName != 'LI';\n            }).remove();\n        }\n        var Menu = Widget.extend({\n            init: function (element, options) {\n                var that = this;\n                Widget.fn.init.call(that, element, options);\n                element = that.wrapper = that.element;\n                options = that.options;\n                that._updateClasses();\n                that._initData(options);\n                that._animations(options);\n                that.nextItemZIndex = 100;\n                that._tabindex();\n                that._initOverflow(options);\n                that._attachMenuEventsHandlers();\n                if (options.openOnClick) {\n                    that.clicked = false;\n                }\n                element.attr('role', 'menubar');\n                if (element[0].id) {\n                    that._ariaId = kendo.format('{0}_mn_active', element[0].id);\n                }\n                kendo.notify(that);\n            },\n            events: [\n                OPEN,\n                CLOSE,\n                ACTIVATE,\n                DEACTIVATE,\n                SELECT\n            ],\n            options: {\n                name: 'Menu',\n                animation: {\n                    open: { duration: 200 },\n                    close: { duration: 100 }\n                },\n                orientation: 'horizontal',\n                direction: 'default',\n                openOnClick: false,\n                closeOnClick: true,\n                hoverDelay: 100,\n                scrollable: false,\n                popupCollision: undefined\n            },\n            _initData: function (options) {\n                var that = this;\n                if (options.dataSource) {\n                    that.angular('cleanup', function () {\n                        return { elements: that.element.children() };\n                    });\n                    that.element.empty();\n                    that.append(options.dataSource, that.element);\n                    that.angular('compile', function () {\n                        return { elements: that.element.children() };\n                    });\n                }\n            },\n            _attachMenuEventsHandlers: function () {\n                var that = this;\n                var element = that.element;\n                var options = that.options;\n                var overflowWrapper = that._overflowWrapper();\n                (overflowWrapper || element).on(POINTERDOWN, itemSelector, proxy(that._focusHandler, that)).on(CLICK + NS, disabledSelector, false).on(CLICK + NS, itemSelector, proxy(that._click, that)).on(POINTERDOWN + ' ' + MOUSEDOWN + NS, '.k-content', proxy(that._preventClose, that)).on(MOUSEENTER + NS, availableItemsSelector, proxy(that._mouseenter, that)).on(MOUSELEAVE + NS, availableItemsSelector, proxy(that._mouseleave, that)).on(MOUSEDOWN + NS, availableItemsSelector, proxy(that._mousedown, that)).on(MOUSEENTER + NS + ' ' + MOUSELEAVE + NS + ' ' + MOUSEDOWN + NS + ' ' + CLICK + NS, linkSelector, proxy(that._toggleHover, that));\n                element.on('keydown' + NS, proxy(that._keydown, that)).on('focus' + NS, proxy(that._focus, that)).on('focus' + NS, '.k-content', proxy(that._focus, that)).on('blur' + NS, proxy(that._removeHoverItem, that)).on('blur' + NS, '[tabindex]', proxy(that._checkActiveElement, that));\n                if (overflowWrapper) {\n                    overflowWrapper.on(MOUSELEAVE + NS, popupSelector, proxy(that._mouseleavePopup, that)).on(MOUSEENTER + NS, popupSelector, proxy(that._mouseenterPopup, that));\n                }\n                if (options.openOnClick) {\n                    that._documentClickHandler = proxy(that._documentClick, that);\n                    $(document).click(that._documentClickHandler);\n                }\n            },\n            _detachMenuEventsHandlers: function () {\n                var that = this;\n                var overflowWrapper = that._overflowWrapper();\n                if (overflowWrapper) {\n                    overflowWrapper.off(NS);\n                }\n                that.element.off(NS);\n                if (that._documentClickHandler) {\n                    $(document).unbind('click', that._documentClickHandler);\n                }\n            },\n            _initOverflow: function (options) {\n                var that = this;\n                var isHorizontal = options.orientation == 'horizontal';\n                var backwardBtn, forwardBtn;\n                if (options.scrollable) {\n                    that._openedPopups = {};\n                    that._scrollWrapper = that.element.wrap('<div class=\\'k-menu-scroll-wrapper ' + options.orientation + '\\'></div>').parent();\n                    if (isHorizontal) {\n                        removeSpacesBetweenItems(that.element);\n                    }\n                    backwardBtn = $(templates.scrollButton({ direction: isHorizontal ? 'left' : 'up' }));\n                    forwardBtn = $(templates.scrollButton({ direction: isHorizontal ? 'right' : 'down' }));\n                    backwardBtn.add(forwardBtn).appendTo(that._scrollWrapper);\n                    that._initScrolling(that.element, backwardBtn, forwardBtn, isHorizontal);\n                    var initialWidth = that.element.outerWidth();\n                    var initialCssWidth = that.element[0].style.width;\n                    initialCssWidth = initialCssWidth === 'auto' ? '' : initialCssWidth;\n                    if (isHorizontal) {\n                        $(window).on(RESIZE, kendo.throttle(function () {\n                            that._setOverflowWrapperWidth(initialWidth, initialCssWidth);\n                            that._toggleScrollButtons(that.element, backwardBtn, forwardBtn, isHorizontal);\n                        }, 100));\n                    }\n                    that._setOverflowWrapperWidth(initialWidth, initialCssWidth);\n                    that._toggleScrollButtons(that.element, backwardBtn, forwardBtn, isHorizontal);\n                }\n            },\n            _overflowWrapper: function () {\n                return this._scrollWrapper || this._popupsWrapper;\n            },\n            _setOverflowWrapperWidth: function (initialWidth, initialCssWidth) {\n                var that = this;\n                var wrapperCssWidth = that._scrollWrapper.css('width');\n                that._scrollWrapper.css({ width: '' });\n                var wrapperWidth = that._scrollWrapper.outerWidth();\n                that._scrollWrapper.css({ width: wrapperCssWidth });\n                var menuWidth = that.element.outerWidth();\n                var borders = that.element[0].offsetWidth - that.element[0].clientWidth;\n                if (menuWidth != wrapperWidth && wrapperWidth > 0) {\n                    var width = initialCssWidth ? Math.min(initialWidth, wrapperWidth) : wrapperWidth;\n                    that.element.width(width - borders);\n                    that._scrollWrapper.width(width);\n                }\n            },\n            _reinitOverflow: function (options) {\n                var that = this;\n                var overflowChanged = options.scrollable && !that.options.scrollable || !options.scrollable && that.options.scrollable || options.scrollable && that.options.scrollable && options.scrollable.distance != that.options.scrollable.distance || options.orientation != that.options.orientation;\n                if (overflowChanged) {\n                    that._detachMenuEventsHandlers();\n                    that._destroyOverflow();\n                    that._initOverflow(options);\n                    that._attachMenuEventsHandlers();\n                }\n            },\n            _destroyOverflow: function () {\n                var that = this;\n                var overflowWrapper = that._overflowWrapper();\n                if (overflowWrapper) {\n                    overflowWrapper.off(NS);\n                    overflowWrapper.find(scrollButtonSelector).off(NS).remove();\n                    overflowWrapper.children(animationContainerSelector).each(function (i, popupWrapper) {\n                        var ul = $(popupWrapper).children(groupSelector);\n                        ul.off(MOUSEWHEEL);\n                        var popupParentLi = popupParentItem(ul, overflowWrapper);\n                        if (popupParentLi.length) {\n                            popupParentLi.append(popupWrapper);\n                        }\n                    });\n                    overflowWrapper.find(popupOpenerSelector()).removeAttr('data-groupparent');\n                    overflowWrapper.find(popupGroupSelector()).removeAttr('data-group');\n                    that.element.off(MOUSEWHEEL);\n                    $(window).off(RESIZE);\n                    overflowWrapper.contents().unwrap();\n                    that._scrollWrapper = that._popupsWrapper = that._openedPopups = undefined;\n                }\n            },\n            _initScrolling: function (scrollElement, backwardBtn, forwardBtn, isHorizontal) {\n                var that = this;\n                var scrollable = that.options.scrollable;\n                var distance = $.isNumeric(scrollable.distance) ? scrollable.distance : SCROLLSPEED;\n                var mouseWheelDistance = distance / 2;\n                var backward = '-=' + distance;\n                var forward = '+=' + distance;\n                var backwardDouble = '-=' + distance * 2;\n                var forwardDouble = '+=' + distance * 2;\n                var scrolling = false;\n                var touchEvents = false;\n                var scroll = function (value) {\n                    var scrollValue = isHorizontal ? { 'scrollLeft': value } : { 'scrollTop': value };\n                    scrollElement.finish().animate(scrollValue, 'fast', 'linear', function () {\n                        if (scrolling) {\n                            scroll(value);\n                        }\n                    });\n                    that._toggleScrollButtons(scrollElement, backwardBtn, forwardBtn, isHorizontal);\n                };\n                var mouseenterHandler = function (e) {\n                    if (!scrolling && !touchEvents) {\n                        scroll(e.data.direction);\n                        scrolling = true;\n                    }\n                };\n                var mousedownHandler = function (e) {\n                    var scrollValue = isHorizontal ? { 'scrollLeft': e.data.direction } : { 'scrollTop': e.data.direction };\n                    touchEvents = isTouch(e) || isPointerTouch(e);\n                    scrollElement.stop().animate(scrollValue, 'fast', 'linear', function () {\n                        if (!touchEvents) {\n                            $(e.currentTarget).trigger(MOUSEENTER);\n                        } else {\n                            that._toggleScrollButtons(scrollElement, backwardBtn, forwardBtn, isHorizontal);\n                            scrolling = true;\n                        }\n                    });\n                    scrolling = false;\n                    e.stopPropagation();\n                    e.preventDefault();\n                };\n                backwardBtn.on(MOUSEENTER + NS, { direction: backward }, mouseenterHandler).on(kendo.eventMap.down + NS, { direction: backwardDouble }, mousedownHandler);\n                forwardBtn.on(MOUSEENTER + NS, { direction: forward }, mouseenterHandler).on(kendo.eventMap.down + NS, { direction: forwardDouble }, mousedownHandler);\n                backwardBtn.add(forwardBtn).on(MOUSELEAVE + NS, function () {\n                    scrollElement.stop();\n                    scrolling = false;\n                    that._toggleScrollButtons(scrollElement, backwardBtn, forwardBtn, isHorizontal);\n                });\n                scrollElement.on(MOUSEWHEEL, function (e) {\n                    if (!e.ctrlKey && !e.shiftKey && !e.altKey) {\n                        var wheelDelta = mousewheelDelta(e.originalEvent);\n                        var scrollSpeed = Math.abs(wheelDelta) * mouseWheelDistance;\n                        var value = (wheelDelta > 0 ? '+=' : '-=') + scrollSpeed;\n                        var scrollValue = isHorizontal ? { 'scrollLeft': value } : { 'scrollTop': value };\n                        that._closeChildPopups(scrollElement);\n                        scrollElement.finish().animate(scrollValue, 'fast', 'linear', function () {\n                            that._toggleScrollButtons(scrollElement, backwardBtn, forwardBtn, isHorizontal);\n                        });\n                        e.preventDefault();\n                    }\n                });\n            },\n            _toggleScrollButtons: function (scrollElement, backwardBtn, forwardBtn, horizontal) {\n                var currentScroll = horizontal ? scrollElement.scrollLeft() : scrollElement.scrollTop();\n                var scrollSize = horizontal ? SCROLLWIDTH : SCROLLHEIGHT;\n                var offset = horizontal ? OFFSETWIDTH : OFFSETHEIGHT;\n                backwardBtn.toggle(currentScroll !== 0);\n                forwardBtn.toggle(currentScroll < scrollElement[0][scrollSize] - scrollElement[0][offset] - 1);\n            },\n            setOptions: function (options) {\n                var animation = this.options.animation;\n                this._animations(options);\n                options.animation = extend(true, animation, options.animation);\n                if ('dataSource' in options) {\n                    this._initData(options);\n                }\n                this._updateClasses();\n                this._reinitOverflow(options);\n                Widget.fn.setOptions.call(this, options);\n            },\n            destroy: function () {\n                var that = this;\n                Widget.fn.destroy.call(that);\n                that._detachMenuEventsHandlers();\n                that._destroyOverflow();\n                kendo.destroy(that.element);\n            },\n            enable: function (element, enable) {\n                this._toggleDisabled(element, enable !== false);\n                return this;\n            },\n            disable: function (element) {\n                this._toggleDisabled(element, false);\n                return this;\n            },\n            append: function (item, referenceItem) {\n                referenceItem = this.element.find(referenceItem);\n                var inserted = this._insert(item, referenceItem, referenceItem.length ? referenceItem.find('> .k-menu-group, > .k-animation-container > .k-menu-group') : null);\n                each(inserted.items, function (i) {\n                    inserted.group.append(this);\n                    updateArrow(this);\n                    storeItemSelectEventHandler(this, item[i] || item);\n                });\n                updateArrow(referenceItem);\n                updateFirstLast(inserted.group.find('.k-first, .k-last').add(inserted.items));\n                updateHasAriaPopup(getParentLiItems(inserted.group));\n                return this;\n            },\n            insertBefore: function (item, referenceItem) {\n                referenceItem = this.element.find(referenceItem);\n                var inserted = this._insert(item, referenceItem, referenceItem.parent());\n                each(inserted.items, function (i) {\n                    referenceItem.before(this);\n                    updateArrow(this);\n                    updateFirstLast(this);\n                    storeItemSelectEventHandler(this, item[i] || item);\n                });\n                updateFirstLast(referenceItem);\n                return this;\n            },\n            insertAfter: function (item, referenceItem) {\n                referenceItem = this.element.find(referenceItem);\n                var inserted = this._insert(item, referenceItem, referenceItem.parent());\n                each(inserted.items, function (i) {\n                    referenceItem.after(this);\n                    updateArrow(this);\n                    updateFirstLast(this);\n                    storeItemSelectEventHandler(this, item[i] || item);\n                });\n                updateFirstLast(referenceItem);\n                return this;\n            },\n            _insert: function (item, referenceItem, parent) {\n                var that = this, items, groups;\n                if (!referenceItem || !referenceItem.length) {\n                    parent = that.element;\n                }\n                var plain = $.isPlainObject(item), groupData = {\n                        firstLevel: parent.hasClass(MENU),\n                        horizontal: parent.hasClass(MENU + '-horizontal'),\n                        expanded: true,\n                        length: parent.children().length\n                    };\n                if (referenceItem && !parent.length) {\n                    parent = $(Menu.renderGroup({ group: groupData })).appendTo(referenceItem);\n                }\n                if (plain || $.isArray(item)) {\n                    items = $($.map(plain ? [item] : item, function (value, idx) {\n                        if (typeof value === 'string') {\n                            return $(value).get();\n                        } else {\n                            return $(Menu.renderItem({\n                                group: groupData,\n                                item: extend(value, { index: idx })\n                            })).get();\n                        }\n                    }));\n                } else {\n                    if (typeof item == 'string' && item.charAt(0) != '<') {\n                        items = that.element.find(item);\n                    } else {\n                        items = $(item);\n                    }\n                    groups = items.find('> ul').addClass('k-menu-group').attr('role', 'menu');\n                    items = items.filter('li');\n                    items.add(groups.find('> li')).each(function () {\n                        updateItemClasses(this);\n                    });\n                }\n                return {\n                    items: items,\n                    group: parent\n                };\n            },\n            remove: function (element) {\n                element = this.element.find(element);\n                var that = this, parent = element.parentsUntil(that.element, allItemsSelector), group = element.parent('ul:not(.k-menu)');\n                element.remove();\n                if (group && !group.children(allItemsSelector).length) {\n                    var parentItems = getParentLiItems(group);\n                    var container = group.parent(animationContainerSelector);\n                    if (container.length) {\n                        container.remove();\n                    } else {\n                        group.remove();\n                    }\n                    updateHasAriaPopup(parentItems);\n                }\n                if (parent.length) {\n                    parent = parent.eq(0);\n                    updateArrow(parent);\n                    updateFirstLast(parent);\n                }\n                return that;\n            },\n            open: function (element) {\n                var that = this;\n                var options = that.options;\n                var horizontal = options.orientation == 'horizontal';\n                var direction = options.direction;\n                var isRtl = kendo.support.isRtl(that.wrapper);\n                var overflowWrapper = that._overflowWrapper();\n                element = (overflowWrapper || that.element).find(element);\n                if (/^(top|bottom|default)$/.test(direction)) {\n                    if (isRtl) {\n                        direction = horizontal ? (direction + ' left').replace('default', 'bottom') : 'left';\n                    } else {\n                        direction = horizontal ? (direction + ' right').replace('default', 'bottom') : 'right';\n                    }\n                }\n                if (that.options.openOnClick) {\n                    that.clicked = true;\n                }\n                element.each(function () {\n                    var li = $(this);\n                    clearTimeout(li.data(TIMER));\n                    li.data(TIMER, setTimeout(function () {\n                        var ul = li.find('.k-menu-group:first:hidden');\n                        var popup;\n                        var overflowPopup;\n                        if (!ul[0] && overflowWrapper) {\n                            overflowPopup = that._getPopup(li);\n                            ul = overflowPopup && overflowPopup.element;\n                        }\n                        if (ul.is(':visible')) {\n                            return;\n                        }\n                        if (ul[0] && that._triggerEvent({\n                                item: li[0],\n                                type: OPEN\n                            }) === false) {\n                            if (!ul.find('.k-menu-group')[0] && ul.children('.k-item').length > 1) {\n                                var windowHeight = $(window).height(), setScrolling = function () {\n                                        ul.css({\n                                            maxHeight: windowHeight - (kendo._outerHeight(ul) - ul.height()) - kendo.getShadows(ul).bottom,\n                                            overflow: 'auto'\n                                        });\n                                    };\n                                if (kendo.support.browser.msie && kendo.support.browser.version <= 7) {\n                                    setTimeout(setScrolling, 0);\n                                } else {\n                                    setScrolling();\n                                }\n                            } else {\n                                ul.css({\n                                    maxHeight: '',\n                                    overflow: ''\n                                });\n                            }\n                            li.data(ZINDEX, li.css(ZINDEX));\n                            var nextZindex = that.nextItemZIndex++;\n                            li.css(ZINDEX, nextZindex);\n                            if (that.options.scrollable) {\n                                li.parent().siblings(scrollButtonSelector).css({ zIndex: ++nextZindex });\n                            }\n                            popup = ul.data(KENDOPOPUP);\n                            var root = li.parent().hasClass(MENU), parentHorizontal = root && horizontal, directions = parseDirection(direction, root, isRtl), effects = options.animation.open.effects, openEffects = effects !== undefined ? effects : 'slideIn:' + getEffectDirection(direction, root);\n                            if (!popup) {\n                                popup = ul.kendoPopup({\n                                    activate: function () {\n                                        that._triggerEvent({\n                                            item: this.wrapper.parent(),\n                                            type: ACTIVATE\n                                        });\n                                    },\n                                    deactivate: function (e) {\n                                        e.sender.element.removeData('targetTransform').css({ opacity: '' });\n                                        that._triggerEvent({\n                                            item: this.wrapper.parent(),\n                                            type: DEACTIVATE\n                                        });\n                                    },\n                                    origin: directions.origin,\n                                    position: directions.position,\n                                    collision: options.popupCollision !== undefined ? options.popupCollision : parentHorizontal ? 'fit' : 'fit flip',\n                                    anchor: li,\n                                    appendTo: overflowWrapper || li,\n                                    animation: {\n                                        open: extend(true, { effects: openEffects }, options.animation.open),\n                                        close: options.animation.close\n                                    },\n                                    open: proxy(that._popupOpen, that),\n                                    close: function (e) {\n                                        var li = e.sender.wrapper.parent();\n                                        if (overflowWrapper) {\n                                            var popupId = e.sender.element.data(POPUP_ID_ATTR);\n                                            if (popupId) {\n                                                li = (overflowWrapper || that.element).find(popupOpenerSelector(popupId));\n                                            }\n                                            e.sender.wrapper.children(scrollButtonSelector).hide();\n                                        }\n                                        if (!that._triggerEvent({\n                                                item: li[0],\n                                                type: CLOSE\n                                            })) {\n                                            li.css(ZINDEX, li.data(ZINDEX));\n                                            li.removeData(ZINDEX);\n                                            if (that.options.scrollable) {\n                                                li.parent().siblings(scrollButtonSelector).css({ zIndex: '' });\n                                            }\n                                            if (touch || allPointers) {\n                                                li.removeClass(HOVERSTATE);\n                                                that._removeHoverItem();\n                                            }\n                                        } else {\n                                            e.preventDefault();\n                                        }\n                                    }\n                                }).data(KENDOPOPUP);\n                            } else {\n                                popup = ul.data(KENDOPOPUP);\n                                popup.options.origin = directions.origin;\n                                popup.options.position = directions.position;\n                                popup.options.animation.open.effects = openEffects;\n                            }\n                            ul.removeAttr('aria-hidden');\n                            that._configurePopupOverflow(popup, li);\n                            popup._hovered = true;\n                            popup.open();\n                            that._initPopupScrolling(popup);\n                        }\n                    }, that.options.hoverDelay));\n                });\n                return that;\n            },\n            _configurePopupOverflow: function (popup, popupOpener) {\n                var that = this;\n                if (that.options.scrollable) {\n                    that._wrapPopupElement(popup);\n                    if (!popupOpener.attr('data-groupparent')) {\n                        var groupId = new Date().getTime();\n                        popupOpener.attr('data-groupparent', groupId);\n                        popup.element.attr('data-group', groupId);\n                    }\n                }\n            },\n            _wrapPopupElement: function (popup) {\n                if (!popup.element.parent().is(animationContainerSelector)) {\n                    popup.wrapper = kendo.wrap(popup.element, popup.options.autosize).css({\n                        overflow: 'hidden',\n                        display: 'block',\n                        position: 'absolute'\n                    });\n                }\n            },\n            _initPopupScrolling: function (popup, isHorizontal, skipMouseEvents) {\n                var that = this;\n                if (that.options.scrollable && popup.element[0].scrollHeight > popup.element[0].offsetHeight) {\n                    that._initPopupScrollButtons(popup, isHorizontal, skipMouseEvents);\n                }\n            },\n            _initPopupScrollButtons: function (popup, isHorizontal, skipMouseEvents) {\n                var that = this;\n                var scrollButtons = popup.wrapper.children(scrollButtonSelector);\n                var animation = that.options.animation;\n                var timeout = (animation && animation.open && animation.open.duration || 0) + DELAY;\n                setTimeout(function () {\n                    if (!scrollButtons.length) {\n                        var backwardBtn = $(templates.scrollButton({ direction: isHorizontal ? 'left' : 'up' }));\n                        var forwardBtn = $(templates.scrollButton({ direction: isHorizontal ? 'right' : 'down' }));\n                        scrollButtons = backwardBtn.add(forwardBtn).appendTo(popup.wrapper);\n                        that._initScrolling(popup.element, backwardBtn, forwardBtn, isHorizontal);\n                        if (!skipMouseEvents) {\n                            scrollButtons.on(MOUSEENTER + NS, function () {\n                                var overflowWrapper = that._overflowWrapper();\n                                $(getChildPopups(popup.element, overflowWrapper)).each(function (i, p) {\n                                    var popupOpener = overflowWrapper.find(popupOpenerSelector(p.data(POPUP_ID_ATTR)));\n                                    that.close(popupOpener);\n                                });\n                            }).on(MOUSELEAVE + NS, function () {\n                                setTimeout(function () {\n                                    if ($.isEmptyObject(that._openedPopups)) {\n                                        that._closeParentPopups(popup.element);\n                                    }\n                                }, DELAY);\n                            });\n                        }\n                    }\n                    that._toggleScrollButtons(popup.element, scrollButtons.first(), scrollButtons.last(), isHorizontal);\n                }, timeout);\n            },\n            _popupOpen: function (e) {\n                if (!this._keyTriggered) {\n                    e.sender.element.children('.' + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                }\n                if (this.options.scrollable) {\n                    this._setPopupHeight(e.sender);\n                }\n            },\n            _setPopupHeight: function (popup, isFixed) {\n                var popupElement = popup.element;\n                var popups = popupElement.add(popupElement.parent(animationContainerSelector));\n                popups.height(popupElement.hasClass(MENU) && this._initialHeight || '');\n                var location = popup._location(isFixed);\n                var windowHeight = $(window).height();\n                var popupOuterHeight = location.height;\n                var popupOffsetTop = isFixed ? 0 : Math.max(location.top, 0);\n                var scrollTop = isFixed ? 0 : parentsScroll(this._overflowWrapper()[0], 'scrollTop');\n                var bottomScrollbar = window.innerHeight - windowHeight;\n                var maxHeight = windowHeight - kendo.getShadows(popupElement).bottom + bottomScrollbar;\n                var canFit = maxHeight + scrollTop > popupOuterHeight + popupOffsetTop;\n                if (!canFit) {\n                    var height = Math.min(maxHeight, maxHeight - popupOffsetTop + scrollTop);\n                    popups.css({\n                        overflow: 'hidden',\n                        height: height + 'px'\n                    });\n                }\n            },\n            close: function (items, dontClearClose) {\n                var that = this;\n                var overflowWrapper = that._overflowWrapper();\n                var element = overflowWrapper || that.element;\n                items = element.find(items);\n                if (!items.length) {\n                    items = element.find('>.k-item');\n                }\n                var hasChildPopupsHovered = function (currentPopup) {\n                    var result = false;\n                    if ($.isEmptyObject(that._openedPopups)) {\n                        return result;\n                    }\n                    $(getChildPopups(currentPopup, overflowWrapper)).each(function (i, popup) {\n                        result = !!that._openedPopups[popup.data(POPUP_ID_ATTR).toString()];\n                        return !result;\n                    });\n                    return result;\n                };\n                var isPopupMouseLeaved = function (opener) {\n                    var groupId = opener.data(POPUP_OPENER_ATTR);\n                    return !overflowWrapper || !groupId || !that._openedPopups[groupId.toString()];\n                };\n                items.each(function () {\n                    var li = $(this);\n                    if (!dontClearClose && that._isRootItem(li)) {\n                        that.clicked = false;\n                    }\n                    clearTimeout(li.data(TIMER));\n                    li.data(TIMER, setTimeout(function () {\n                        var popup = that._getPopup(li);\n                        if (popup && (isPopupMouseLeaved(li) || that._forceClose)) {\n                            if (!that._forceClose && hasChildPopupsHovered(popup.element)) {\n                                return;\n                            }\n                            popup.close();\n                            popup.element.attr('aria-hidden', true);\n                            if (overflowWrapper) {\n                                if (that._forceClose && items.last().is(li[0])) {\n                                    delete that._forceClose;\n                                }\n                            }\n                        }\n                    }, that.options.hoverDelay));\n                });\n                return that;\n            },\n            _getPopup: function (li) {\n                var that = this;\n                var popup = li.find('.k-menu-group:not(.k-list-container):not(.k-calendar-container):first:visible').data(KENDOPOPUP);\n                var overflowWrapper = that._overflowWrapper();\n                if (!popup && overflowWrapper) {\n                    var groupId = li.data(POPUP_OPENER_ATTR);\n                    if (groupId) {\n                        var popupElement = overflowWrapper.find(popupGroupSelector(groupId));\n                        popup = popupElement.data(KENDOPOPUP);\n                    }\n                }\n                return popup;\n            },\n            _toggleDisabled: function (items, enable) {\n                this.element.find(items).each(function () {\n                    $(this).toggleClass(DEFAULTSTATE, enable).toggleClass(DISABLEDSTATE, !enable).attr('aria-disabled', !enable);\n                });\n            },\n            _toggleHover: function (e) {\n                var target = $(kendo.eventTarget(e) || e.target).closest(allItemsSelector), isEnter = e.type == MOUSEENTER || MOUSEDOWN.indexOf(e.type) !== -1;\n                if (!target.parents('li.' + DISABLEDSTATE).length) {\n                    target.toggleClass(HOVERSTATE, isEnter || e.type == 'mousedown' || e.type == 'click');\n                }\n                this._removeHoverItem();\n            },\n            _preventClose: function () {\n                if (!this.options.closeOnClick) {\n                    this._closurePrevented = true;\n                }\n            },\n            _checkActiveElement: function (e) {\n                var that = this, hoverItem = $(e ? e.currentTarget : this._hoverItem()), target = that._findRootParent(hoverItem)[0];\n                if (!this._closurePrevented) {\n                    setTimeout(function () {\n                        if (!document.hasFocus() || !contains(target, kendo._activeElement()) && e && !contains(target, e.currentTarget)) {\n                            that.close(target);\n                        }\n                    }, 0);\n                }\n                this._closurePrevented = false;\n            },\n            _removeHoverItem: function () {\n                var oldHoverItem = this._hoverItem();\n                if (oldHoverItem && oldHoverItem.hasClass(FOCUSEDSTATE)) {\n                    oldHoverItem.removeClass(FOCUSEDSTATE);\n                    this._oldHoverItem = null;\n                }\n            },\n            _updateClasses: function () {\n                var element = this.element, nonContentGroupsSelector = '.k-menu-init div ul', items;\n                element.removeClass('k-menu-horizontal k-menu-vertical');\n                element.addClass('k-widget k-reset k-header k-menu-init ' + MENU).addClass(MENU + '-' + this.options.orientation);\n                element.find('li > ul').filter(function () {\n                    return !kendo.support.matchesSelector.call(this, nonContentGroupsSelector);\n                }).addClass('k-group k-menu-group').attr('role', 'menu').attr('aria-hidden', element.is(':visible')).parent('li').attr('aria-haspopup', 'true').end().find('li > div').addClass('k-content').attr('tabindex', '-1');\n                items = element.find('> li,.k-menu-group > li');\n                element.removeClass('k-menu-init');\n                items.each(function () {\n                    updateItemClasses(this);\n                });\n            },\n            _mouseenter: function (e) {\n                var that = this;\n                var element = $(e.currentTarget);\n                var hasChildren = that._itemHasChildren(element);\n                var popupId = element.data(POPUP_OPENER_ATTR) || element.parent().data(POPUP_ID_ATTR);\n                var pointerTouch = isPointerTouch(e);\n                if (popupId) {\n                    that._openedPopups[popupId.toString()] = true;\n                }\n                if (e.delegateTarget != element.parents(menuSelector)[0] && e.delegateTarget != element.parents('.k-menu-scroll-wrapper,.k-popups-wrapper')[0]) {\n                    return;\n                }\n                that._keyTriggered = false;\n                if (that.options.openOnClick.rootMenuItems && that._isRootItem(element.closest(allItemsSelector)) || that.options.openOnClick.subMenuItems && !that._isRootItem(element.closest(allItemsSelector))) {\n                    return;\n                }\n                if ((that.options.openOnClick === false || that.options.openOnClick.rootMenuItems === false && that._isRootItem(element.closest(allItemsSelector)) || that.options.openOnClick.subMenuItems === false && !that._isRootItem(element.closest(allItemsSelector)) || that.clicked) && !touch && !(pointerTouch && that._isRootItem(element.closest(allItemsSelector)))) {\n                    if (!contains(e.currentTarget, e.relatedTarget) && hasChildren) {\n                        that.open(element);\n                    }\n                }\n                if (that.options.openOnClick === true && that.clicked || touch) {\n                    element.siblings().each(proxy(function (_, sibling) {\n                        that.close(sibling, true);\n                    }, that));\n                }\n            },\n            _mousedown: function (e) {\n                var that = this;\n                var element = $(e.currentTarget);\n                if (that.options.openOnClick.subMenuItems && !that._isRootItem(element) || touch) {\n                    element.siblings().each(proxy(function (_, sibling) {\n                        that.close(sibling, true);\n                    }, that));\n                }\n            },\n            _mouseleave: function (e) {\n                var that = this;\n                var element = $(e.currentTarget);\n                var popupOpener = element.data(POPUP_OPENER_ATTR);\n                var hasChildren = element.children(animationContainerSelector).length || element.children(groupSelector).length || popupOpener;\n                var $window = $(window);\n                if (popupOpener) {\n                    delete that._openedPopups[popupOpener.toString()];\n                }\n                if (element.parentsUntil(animationContainerSelector, '.k-list-container,.k-calendar-container')[0]) {\n                    e.stopImmediatePropagation();\n                    return;\n                }\n                if ((that.options.openOnClick === false || !that.options.openOnClick.rootMenuItems && that._isRootItem(element) || !that.options.openOnClick.subMenuItems && !that._isRootItem(element)) && !touch && !isPointerTouch(e) && !contains(e.currentTarget, e.relatedTarget || e.target) && hasChildren && !contains(e.currentTarget, kendo._activeElement())) {\n                    that.close(element, true);\n                    return;\n                }\n                if (kendo.support.browser.msie && !e.toElement && !e.relatedTarget || e.clientX < 0 || e.clientY < 0 || e.clientY > $window.height() || e.clientX > $window.width()) {\n                    that.close(element);\n                }\n            },\n            _mouseenterPopup: function (e) {\n                var that = this;\n                var popupElement = $(e.currentTarget);\n                if (popupElement.parent().is(animationContainerSelector)) {\n                    return;\n                }\n                popupElement = popupElement.children('ul');\n                var popupId = popupElement.data(POPUP_ID_ATTR);\n                if (popupId) {\n                    that._openedPopups[popupId.toString()] = true;\n                }\n            },\n            _mouseleavePopup: function (e) {\n                var that = this;\n                var popupElement = $(e.currentTarget);\n                if (!isPointerTouch(e) && popupElement.is(animationContainerSelector)) {\n                    that._closePopups(popupElement.children('ul'));\n                }\n            },\n            _closePopups: function (rootPopup) {\n                var that = this;\n                var overflowWrapper = that._overflowWrapper();\n                var popupId = rootPopup.data(POPUP_ID_ATTR);\n                if (popupId) {\n                    delete that._openedPopups[popupId.toString()];\n                    var groupParent = overflowWrapper.find(popupOpenerSelector(popupId));\n                    setTimeout(function () {\n                        if (that.options.openOnClick) {\n                            that._closeChildPopups(rootPopup);\n                        } else {\n                            if ($.isEmptyObject(that._openedPopups)) {\n                                var innerPopup = that._innerPopup(rootPopup);\n                                that._closeParentPopups(innerPopup);\n                            } else {\n                                that.close(groupParent, true);\n                            }\n                        }\n                    }, 0);\n                }\n            },\n            _closeChildPopups: function (current) {\n                var that = this;\n                var overflowWrapper = that._overflowWrapper();\n                $(getChildPopups(current, overflowWrapper)).each(function () {\n                    var popupOpener = overflowWrapper.find(popupOpenerSelector(this.data(POPUP_ID_ATTR)));\n                    that.close(popupOpener, true);\n                });\n            },\n            _innerPopup: function (current) {\n                var overflowWrapper = this._overflowWrapper();\n                var popups = getChildPopups(current, overflowWrapper);\n                return popups[popups.length - 1] || current;\n            },\n            _closeParentPopups: function (current) {\n                var that = this;\n                var overflowWrapper = that._overflowWrapper();\n                var popupId = current.data(POPUP_ID_ATTR);\n                var popupOpener = overflowWrapper.find(popupOpenerSelector(popupId));\n                popupId = popupOpener.parent().data(POPUP_ID_ATTR);\n                that.close(popupOpener, true);\n                while (popupId && !that._openedPopups[popupId]) {\n                    if (popupOpener.parent().is(menuSelector)) {\n                        break;\n                    }\n                    popupOpener = overflowWrapper.find(popupOpenerSelector(popupId));\n                    that.close(popupOpener, true);\n                    popupId = popupOpener.parent().data(POPUP_ID_ATTR);\n                }\n            },\n            _click: function (e) {\n                var that = this, openHandle, options = that.options, target = $(kendo.eventTarget(e)), targetElement = target[0], nodeName = target[0] ? target[0].nodeName.toUpperCase() : '', formNode = nodeName == 'INPUT' || nodeName == 'SELECT' || nodeName == 'BUTTON' || nodeName == 'LABEL', link = target.closest('.' + LINK), element = target.closest(allItemsSelector), itemElement = element[0], href = link.attr('href'), childGroup, childGroupVisible, targetHref = target.attr('href'), sampleHref = $('<a href=\\'#\\' />').attr('href'), isLink = !!href && href !== sampleHref, isLocalLink = isLink && !!href.match(/^#/), isTargetLink = !!targetHref && targetHref !== sampleHref, overflowWrapper = that._overflowWrapper(), shouldCloseTheRootItem;\n                while (targetElement && targetElement.parentNode != itemElement) {\n                    targetElement = targetElement.parentNode;\n                }\n                if ($(targetElement).is(templateSelector)) {\n                    return;\n                }\n                if (element.hasClass(DISABLEDSTATE)) {\n                    e.preventDefault();\n                    return;\n                }\n                if (!e.handled && that._triggerSelect(target, itemElement) && !formNode) {\n                    e.preventDefault();\n                }\n                e.handled = true;\n                childGroup = element.children(popupSelector);\n                if (overflowWrapper) {\n                    var childPopupId = element.data(POPUP_OPENER_ATTR);\n                    if (childPopupId) {\n                        childGroup = overflowWrapper.find(popupGroupSelector(childPopupId));\n                    }\n                }\n                childGroupVisible = childGroup.is(':visible');\n                shouldCloseTheRootItem = options.openOnClick && childGroupVisible && that._isRootItem(element);\n                if (options.closeOnClick && (!isLink || isLocalLink) && (!childGroup.length || shouldCloseTheRootItem)) {\n                    element.removeClass(HOVERSTATE).css('height');\n                    that._oldHoverItem = that._findRootParent(element);\n                    var item = that._parentsUntil(link, that.element, allItemsSelector);\n                    that._forceClose = !!overflowWrapper;\n                    that.close(item);\n                    that.clicked = false;\n                    if ('MSPointerUp'.indexOf(e.type) != -1) {\n                        e.preventDefault();\n                    }\n                    return;\n                }\n                if (isLink && e.enterKey) {\n                    link[0].click();\n                }\n                if ((!that._isRootItem(element) || options.openOnClick === false) && !options.openOnClick.subMenuItems && !kendo.support.touch && !(isPointerTouch(e) && that._isRootItem(element.closest(allItemsSelector)))) {\n                    return;\n                }\n                if (!isLink && !formNode && !isTargetLink) {\n                    e.preventDefault();\n                }\n                that.clicked = true;\n                openHandle = childGroup.is(':visible') ? CLOSE : OPEN;\n                if (!options.closeOnClick && openHandle == CLOSE) {\n                    return;\n                }\n                that[openHandle](element);\n            },\n            _parentsUntil: function (context, top, selector) {\n                var overflowWrapper = this._overflowWrapper();\n                if (!overflowWrapper) {\n                    return context.parentsUntil(top, selector);\n                } else {\n                    var parents = overflowMenuParents(context, overflowWrapper);\n                    var result = [];\n                    $(parents).each(function () {\n                        var parent = $(this);\n                        if (parent.is(top)) {\n                            return false;\n                        }\n                        if (parent.is(selector)) {\n                            result.push(this);\n                        }\n                    });\n                    return $(result);\n                }\n            },\n            _triggerSelect: function (target, itemElement) {\n                target = target.is('.k-link') ? target : target.closest('.k-link');\n                var selectHandler = target.data('selectHandler'), itemSelectEventData;\n                if (selectHandler) {\n                    itemSelectEventData = this._getEventData(target);\n                    selectHandler.call(this, itemSelectEventData);\n                }\n                var isSelectItemDefaultPrevented = itemSelectEventData && itemSelectEventData.isDefaultPrevented();\n                var isSelectDefaultPrevented = this._triggerEvent({\n                    item: itemElement,\n                    type: SELECT\n                });\n                return isSelectItemDefaultPrevented || isSelectDefaultPrevented;\n            },\n            _getEventData: function (target) {\n                var eventData = {\n                    sender: this,\n                    target: target,\n                    _defaultPrevented: false,\n                    preventDefault: function () {\n                        this._defaultPrevented = true;\n                    },\n                    isDefaultPrevented: function () {\n                        return this._defaultPrevented;\n                    }\n                };\n                return eventData;\n            },\n            _documentClick: function (e) {\n                var that = this;\n                if (contains((that._overflowWrapper() || that.element)[0], e.target)) {\n                    return;\n                }\n                that.clicked = false;\n            },\n            _focus: function (e) {\n                var that = this, target = e.target, hoverItem = that._hoverItem(), active = activeElement();\n                if (target != that.wrapper[0] && !$(target).is(':kendoFocusable')) {\n                    e.stopPropagation();\n                    $(target).closest('.k-content').closest('.k-menu-group').closest('.k-item').addClass(FOCUSEDSTATE);\n                    that.wrapper.focus();\n                    return;\n                }\n                if (active === e.currentTarget) {\n                    if (hoverItem.length) {\n                        that._moveHover([], hoverItem);\n                    } else if (!that._oldHoverItem) {\n                        that._moveHover([], that.wrapper.children().first());\n                    }\n                }\n            },\n            _keydown: function (e) {\n                var that = this, key = e.keyCode, hoverItem = that._oldHoverItem, target, belongsToVertical, hasChildren, isRtl = kendo.support.isRtl(that.wrapper);\n                if (e.target != e.currentTarget && key != keys.ESC) {\n                    return;\n                }\n                if (!hoverItem) {\n                    hoverItem = that._oldHoverItem = that._hoverItem();\n                }\n                belongsToVertical = that._itemBelongsToVertival(hoverItem);\n                hasChildren = that._itemHasChildren(hoverItem);\n                that._keyTriggered = true;\n                if (key == keys.RIGHT) {\n                    target = that[isRtl ? '_itemLeft' : '_itemRight'](hoverItem, belongsToVertical, hasChildren);\n                } else if (key == keys.LEFT) {\n                    target = that[isRtl ? '_itemRight' : '_itemLeft'](hoverItem, belongsToVertical, hasChildren);\n                } else if (key == keys.DOWN) {\n                    target = that._itemDown(hoverItem, belongsToVertical, hasChildren);\n                } else if (key == keys.UP) {\n                    target = that._itemUp(hoverItem, belongsToVertical, hasChildren);\n                } else if (key == keys.HOME) {\n                    that._moveHover(hoverItem, hoverItem.parent().children().first());\n                    e.preventDefault();\n                } else if (key == keys.END) {\n                    that._moveHover(hoverItem, hoverItem.parent().children().last());\n                    e.preventDefault();\n                } else if (key == keys.ESC) {\n                    target = that._itemEsc(hoverItem, belongsToVertical);\n                } else if (key == keys.ENTER || key == keys.SPACEBAR) {\n                    target = hoverItem.children('.k-link');\n                    if (target.length > 0) {\n                        that._click({\n                            target: target[0],\n                            preventDefault: function () {\n                            },\n                            enterKey: true\n                        });\n                        if (hasChildren && !hoverItem.hasClass(DISABLEDSTATE)) {\n                            that.open(hoverItem);\n                            that._moveHover(hoverItem, that._childPopupElement(hoverItem).children().first());\n                        } else {\n                            that._moveHover(hoverItem, that._findRootParent(hoverItem));\n                        }\n                    }\n                } else if (key == keys.TAB) {\n                    target = that._findRootParent(hoverItem);\n                    that._moveHover(hoverItem, target);\n                    that._checkActiveElement();\n                    return;\n                }\n                if (target && target[0]) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                }\n            },\n            _hoverItem: function () {\n                return this.wrapper.find('.k-item.k-state-hover,.k-item.k-state-focused').filter(':visible');\n            },\n            _itemBelongsToVertival: function (item) {\n                var menuIsVertical = this.wrapper.hasClass('k-menu-vertical');\n                if (!item.length) {\n                    return menuIsVertical;\n                }\n                return item.parent().hasClass('k-menu-group') || menuIsVertical;\n            },\n            _itemHasChildren: function (item) {\n                if (!item || !item.length || !item[0].nodeType) {\n                    return false;\n                }\n                return item.children('ul.k-menu-group, div.k-animation-container').length > 0 || !!item.data(POPUP_OPENER_ATTR) && !!this._overflowWrapper().children(popupGroupSelector(item.data(POPUP_OPENER_ATTR)));\n            },\n            _moveHover: function (item, nextItem) {\n                var that = this, id = that._ariaId;\n                if (item.length && nextItem.length) {\n                    item.removeClass(FOCUSEDSTATE);\n                }\n                if (nextItem.length) {\n                    if (nextItem[0].id) {\n                        id = nextItem[0].id;\n                    }\n                    nextItem.addClass(FOCUSEDSTATE);\n                    that._oldHoverItem = nextItem;\n                    if (id) {\n                        that.element.removeAttr('aria-activedescendant');\n                        $('#' + id).removeAttr('id');\n                        nextItem.attr('id', id);\n                        that.element.attr('aria-activedescendant', id);\n                    }\n                    that._scrollToItem(nextItem);\n                }\n            },\n            _findRootParent: function (item) {\n                if (this._isRootItem(item)) {\n                    return item;\n                } else {\n                    return this._parentsUntil(item, menuSelector, 'li.k-item').last();\n                }\n            },\n            _isRootItem: function (item) {\n                return item.parent().hasClass(MENU);\n            },\n            _itemRight: function (item, belongsToVertical, hasChildren) {\n                var that = this, nextItem, parentItem, overflowWrapper;\n                if (!belongsToVertical) {\n                    nextItem = item.nextAll(nextSelector);\n                    if (!nextItem.length) {\n                        nextItem = item.prevAll(lastSelector);\n                    }\n                    that.close(item);\n                } else if (hasChildren && !item.hasClass(DISABLEDSTATE)) {\n                    that.open(item);\n                    nextItem = that._childPopupElement(item).children().first();\n                } else if (that.options.orientation == 'horizontal') {\n                    parentItem = that._findRootParent(item);\n                    overflowWrapper = that._overflowWrapper();\n                    if (overflowWrapper) {\n                        var rootPopup = itemPopup(parentItem, overflowWrapper);\n                        that._closeChildPopups(rootPopup);\n                    }\n                    that.close(parentItem);\n                    nextItem = parentItem.nextAll(nextSelector);\n                }\n                if (nextItem && !nextItem.length) {\n                    nextItem = that.wrapper.children('.k-item').first();\n                } else if (!nextItem) {\n                    nextItem = [];\n                }\n                that._moveHover(item, nextItem);\n                return nextItem;\n            },\n            _itemLeft: function (item, belongsToVertical) {\n                var that = this, nextItem, overflowWrapper;\n                if (!belongsToVertical) {\n                    nextItem = item.prevAll(nextSelector);\n                    if (!nextItem.length) {\n                        nextItem = item.nextAll(lastSelector);\n                    }\n                    that.close(item);\n                } else {\n                    nextItem = item.parent().closest('.k-item');\n                    overflowWrapper = that._overflowWrapper();\n                    if (!nextItem.length && overflowWrapper) {\n                        nextItem = popupParentItem(item.parent(), overflowWrapper);\n                    }\n                    that.close(nextItem);\n                    if (that._isRootItem(nextItem) && that.options.orientation == 'horizontal') {\n                        nextItem = nextItem.prevAll(nextSelector);\n                    }\n                }\n                if (!nextItem.length) {\n                    nextItem = that.wrapper.children('.k-item').last();\n                }\n                that._moveHover(item, nextItem);\n                return nextItem;\n            },\n            _itemDown: function (item, belongsToVertical, hasChildren) {\n                var that = this, nextItem;\n                if (!belongsToVertical) {\n                    if (!hasChildren || item.hasClass(DISABLEDSTATE)) {\n                        return;\n                    } else {\n                        that.open(item);\n                        nextItem = that._childPopupElement(item).children().first();\n                    }\n                } else {\n                    nextItem = item.nextAll(nextSelector);\n                }\n                if (!nextItem.length && item.length) {\n                    nextItem = item.parent().children().first();\n                } else if (!item.length) {\n                    nextItem = that.wrapper.children('.k-item').first();\n                }\n                that._moveHover(item, nextItem);\n                return nextItem;\n            },\n            _itemUp: function (item, belongsToVertical) {\n                var that = this, nextItem;\n                if (!belongsToVertical) {\n                    return;\n                } else {\n                    nextItem = item.prevAll(nextSelector);\n                }\n                if (!nextItem.length && item.length) {\n                    nextItem = item.parent().children().last();\n                } else if (!item.length) {\n                    nextItem = that.wrapper.children('.k-item').last();\n                }\n                that._moveHover(item, nextItem);\n                return nextItem;\n            },\n            _scrollToItem: function (item) {\n                var that = this;\n                if (that.options.scrollable && item && item.length) {\n                    var ul = item.parent();\n                    var isHorizontal = ul.hasClass(MENU) ? that.options.orientation == 'horizontal' : false;\n                    var scrollDir = isHorizontal ? 'scrollLeft' : 'scrollTop';\n                    var getSize = isHorizontal ? kendo._outerWidth : kendo._outerHeight;\n                    var currentScrollOffset = ul[scrollDir]();\n                    var itemSize = getSize(item);\n                    var itemOffset = item[0][isHorizontal ? 'offsetLeft' : 'offsetTop'];\n                    var ulSize = getSize(ul);\n                    var scrollButtons = ul.siblings(scrollButtonSelector);\n                    var scrollButtonSize = scrollButtons.length ? getSize(scrollButtons.first()) : 0;\n                    var itemPosition;\n                    if (currentScrollOffset + ulSize < itemOffset + itemSize + scrollButtonSize) {\n                        itemPosition = itemOffset + itemSize - ulSize + scrollButtonSize;\n                    } else if (currentScrollOffset > itemOffset - scrollButtonSize) {\n                        itemPosition = itemOffset - scrollButtonSize;\n                    }\n                    if (!isNaN(itemPosition)) {\n                        var scrolling = {};\n                        scrolling[scrollDir] = itemPosition;\n                        ul.finish().animate(scrolling, 'fast', 'linear', function () {\n                            that._toggleScrollButtons(ul, scrollButtons.first(), scrollButtons.last(), isHorizontal);\n                        });\n                    }\n                }\n            },\n            _itemEsc: function (item, belongsToVertical) {\n                var that = this, nextItem;\n                if (!belongsToVertical) {\n                    return item;\n                } else {\n                    nextItem = item.parent().closest('.k-item');\n                    that.close(nextItem);\n                    that._moveHover(item, nextItem);\n                }\n                return nextItem;\n            },\n            _childPopupElement: function (item) {\n                var popupElement = item.find('.k-menu-group');\n                var wrapper = this._overflowWrapper();\n                if (!popupElement.length && wrapper) {\n                    popupElement = itemPopup(item, wrapper);\n                }\n                return popupElement;\n            },\n            _triggerEvent: function (e) {\n                var that = this;\n                return that.trigger(e.type, {\n                    type: e.type,\n                    item: e.item\n                });\n            },\n            _focusHandler: function (e) {\n                var that = this, item = $(kendo.eventTarget(e)).closest(allItemsSelector);\n                if (item.hasClass(DISABLEDSTATE)) {\n                    return;\n                }\n                setTimeout(function () {\n                    that._moveHover([], item);\n                    if (item.children('.k-content')[0]) {\n                        item.parent().closest('.k-item').removeClass(FOCUSEDSTATE);\n                    }\n                }, 200);\n            },\n            _animations: function (options) {\n                if (options && 'animation' in options && !options.animation) {\n                    options.animation = {\n                        open: { effects: {} },\n                        close: {\n                            hide: true,\n                            effects: {}\n                        }\n                    };\n                }\n            }\n        });\n        extend(Menu, {\n            renderItem: function (options) {\n                options = extend({\n                    menu: {},\n                    group: {}\n                }, options);\n                var empty = templates.empty, item = options.item;\n                return templates.item(extend(options, {\n                    image: item.imageUrl ? templates.image : empty,\n                    sprite: item.spriteCssClass ? templates.sprite : empty,\n                    itemWrapper: templates.itemWrapper,\n                    renderContent: Menu.renderContent,\n                    arrow: item.items || item.content ? templates.arrow : empty,\n                    subGroup: Menu.renderGroup\n                }, rendering));\n            },\n            renderGroup: function (options) {\n                return templates.group(extend({\n                    renderItems: function (options) {\n                        var html = '', i = 0, items = options.items, len = items ? items.length : 0, group = extend({ length: len }, options.group);\n                        for (; i < len; i++) {\n                            html += Menu.renderItem(extend(options, {\n                                group: group,\n                                item: extend({ index: i }, items[i])\n                            }));\n                        }\n                        return html;\n                    }\n                }, options, rendering));\n            },\n            renderContent: function (options) {\n                return templates.content(extend(options, rendering));\n            }\n        });\n        var ContextMenu = Menu.extend({\n            init: function (element, options) {\n                var that = this;\n                Menu.fn.init.call(that, element, options);\n                that._marker = kendo.guid().substring(0, 8);\n                that.target = $(that.options.target);\n                that._popup();\n                that._wire();\n            },\n            _initOverflow: function (options) {\n                var that = this;\n                if (options.scrollable && !that._overflowWrapper()) {\n                    that._openedPopups = {};\n                    that._popupsWrapper = (that.element.parent().is(animationContainerSelector) ? that.element.parent() : that.element).wrap('<div class=\\'k-popups-wrapper ' + options.orientation + '\\'></div>').parent();\n                    if (that.options.orientation == 'horizontal') {\n                        removeSpacesBetweenItems(that.element);\n                    }\n                    if (options.appendTo) {\n                        options.appendTo.append(that._popupsWrapper);\n                    }\n                    that._initialHeight = that.element[0].style.height;\n                    that._initialWidth = that.element[0].style.width;\n                }\n            },\n            options: {\n                name: 'ContextMenu',\n                filter: null,\n                showOn: 'contextmenu',\n                orientation: 'vertical',\n                alignToAnchor: false,\n                target: 'body'\n            },\n            events: [\n                OPEN,\n                CLOSE,\n                ACTIVATE,\n                DEACTIVATE,\n                SELECT\n            ],\n            setOptions: function (options) {\n                var that = this;\n                Menu.fn.setOptions.call(that, options);\n                that.target.off(that.showOn + NS + that._marker, that._showProxy);\n                if (that.userEvents) {\n                    that.userEvents.destroy();\n                }\n                that.target = $(that.options.target);\n                if (options.orientation && that.popup.wrapper[0]) {\n                    that.popup.element.unwrap();\n                }\n                that._wire();\n                Menu.fn.setOptions.call(this, options);\n            },\n            destroy: function () {\n                var that = this;\n                that.target.off(that.options.showOn + NS + that._marker);\n                DOCUMENT_ELEMENT.off(kendo.support.mousedown + NS + that._marker, that._closeProxy);\n                if (that.userEvents) {\n                    that.userEvents.destroy();\n                }\n                Menu.fn.destroy.call(that);\n            },\n            open: function (x, y) {\n                var that = this;\n                x = $(x)[0];\n                if (contains(that.element[0], $(x)[0]) || that._itemHasChildren($(x))) {\n                    Menu.fn.open.call(that, x);\n                } else {\n                    if (that._triggerEvent({\n                            item: that.element,\n                            type: OPEN\n                        }) === false) {\n                        if (that.popup.visible() && that.options.filter) {\n                            that.popup.close(true);\n                            that.popup.element.kendoStop(true);\n                        }\n                        if (y !== undefined) {\n                            var overflowWrapper = that._overflowWrapper();\n                            if (overflowWrapper) {\n                                var offset = overflowWrapper.offset();\n                                x -= offset.left;\n                                y -= offset.top;\n                            }\n                            that.popup.wrapper.hide();\n                            that._configurePopupScrolling(x, y);\n                            that.popup.open(x, y);\n                        } else {\n                            that.popup.options.anchor = (x ? x : that.popup.anchor) || that.target;\n                            that.popup.element.kendoStop(true);\n                            that._configurePopupScrolling();\n                            that.popup.open();\n                        }\n                        DOCUMENT_ELEMENT.off(that.popup.downEvent, that.popup._mousedownProxy);\n                        DOCUMENT_ELEMENT.on(kendo.support.mousedown + NS + that._marker, that._closeProxy);\n                    }\n                }\n                return that;\n            },\n            _configurePopupScrolling: function (x, y) {\n                var that = this;\n                var popup = that.popup;\n                var isHorizontal = that.options.orientation == 'horizontal';\n                if (that.options.scrollable) {\n                    that._wrapPopupElement(popup);\n                    popup.element.parent().css({\n                        position: '',\n                        height: ''\n                    });\n                    popup.element.css({\n                        visibility: 'hidden',\n                        display: '',\n                        position: ''\n                    });\n                    if (isHorizontal) {\n                        that._setPopupWidth(popup, isNaN(x) ? undefined : {\n                            isFixed: true,\n                            x: x,\n                            y: y\n                        });\n                    } else {\n                        that._setPopupHeight(popup, isNaN(x) ? undefined : {\n                            isFixed: true,\n                            x: x,\n                            y: y\n                        });\n                    }\n                    popup.element.css({\n                        visibility: '',\n                        display: 'none',\n                        position: 'absolute'\n                    });\n                    that._initPopupScrollButtons(popup, isHorizontal, true);\n                    popup.element.siblings(scrollButtonSelector).hide();\n                }\n            },\n            _setPopupWidth: function (popup, isFixed) {\n                var popupElement = popup.element;\n                var popups = popupElement.add(popupElement.parent(animationContainerSelector));\n                popups.width(this._initialWidth || '');\n                var location = popup._location(isFixed);\n                var windowWidth = $(window).width();\n                var popupOuterWidth = location.width;\n                var popupOffsetLeft = Math.max(location.left, 0);\n                var scrollLeft = isFixed ? 0 : parentsScroll(this._overflowWrapper()[0], 'scrollLeft');\n                var shadow = kendo.getShadows(popupElement);\n                var maxWidth = windowWidth - shadow.left - shadow.right;\n                var canFit = maxWidth + scrollLeft > popupOuterWidth + popupOffsetLeft;\n                if (!canFit) {\n                    popups.css({\n                        overflow: 'hidden',\n                        width: maxWidth - popupOffsetLeft + scrollLeft + 'px'\n                    });\n                }\n            },\n            close: function () {\n                var that = this;\n                if (contains(that.element[0], $(arguments[0])[0]) || that._itemHasChildren(arguments[0])) {\n                    Menu.fn.close.call(that, arguments[0]);\n                } else {\n                    if (that.popup.visible()) {\n                        if (that._triggerEvent({\n                                item: that.element,\n                                type: CLOSE\n                            }) === false) {\n                            that.popup.close();\n                            DOCUMENT_ELEMENT.off(kendo.support.mousedown + NS, that._closeProxy);\n                            that.unbind(SELECT, that._closeTimeoutProxy);\n                        }\n                    }\n                }\n            },\n            _showHandler: function (e) {\n                var ev = e, offset, that = this, options = that.options;\n                if (e.event) {\n                    ev = e.event;\n                    ev.pageX = e.x.location;\n                    ev.pageY = e.y.location;\n                }\n                if (contains(that.element[0], e.relatedTarget || e.target)) {\n                    return;\n                }\n                that._eventOrigin = ev;\n                ev.preventDefault();\n                ev.stopImmediatePropagation();\n                that.element.find('.' + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                if (options.filter && kendo.support.matchesSelector.call(ev.currentTarget, options.filter) || !options.filter) {\n                    if (options.alignToAnchor) {\n                        that.popup.options.anchor = ev.currentTarget;\n                        that.open(ev.currentTarget);\n                    } else {\n                        that.popup.options.anchor = ev.currentTarget;\n                        if (that._targetChild) {\n                            offset = that.target.offset();\n                            that.open(ev.pageX - offset.left, ev.pageY - offset.top);\n                        } else {\n                            that.open(ev.pageX, ev.pageY);\n                        }\n                    }\n                }\n            },\n            _closeHandler: function (e) {\n                var that = this, target = $(e.relatedTarget || e.target), sameTarget = target.closest(that.target.selector)[0] == that.target[0], item = target.closest(itemSelector), children = that._itemHasChildren(item), overflowWrapper = that._overflowWrapper(), containment = contains(that.element[0], target[0]) || overflowWrapper && contains(overflowWrapper[0], target[0]);\n                that._eventOrigin = e;\n                var normalClick = e.which !== 3;\n                if (that.popup.visible() && (normalClick && sameTarget || !sameTarget) && (that.options.closeOnClick && !children && containment || !containment)) {\n                    if (containment) {\n                        this.unbind(SELECT, this._closeTimeoutProxy);\n                        that.bind(SELECT, that._closeTimeoutProxy);\n                    } else {\n                        that.close();\n                    }\n                }\n            },\n            _wire: function () {\n                var that = this, options = that.options, target = that.target;\n                that._showProxy = proxy(that._showHandler, that);\n                that._closeProxy = proxy(that._closeHandler, that);\n                that._closeTimeoutProxy = proxy(that.close, that);\n                if (target[0]) {\n                    if (kendo.support.mobileOS && options.showOn == 'contextmenu') {\n                        that.userEvents = new kendo.UserEvents(target, {\n                            filter: options.filter,\n                            allowSelection: false\n                        });\n                        target.on(options.showOn + NS + that._marker, false);\n                        that.userEvents.bind('hold', that._showProxy);\n                    } else {\n                        if (options.filter) {\n                            target.on(options.showOn + NS + that._marker, options.filter, that._showProxy);\n                        } else {\n                            target.on(options.showOn + NS + that._marker, that._showProxy);\n                        }\n                    }\n                }\n            },\n            _triggerEvent: function (e) {\n                var that = this, anchor = $(that.popup.options.anchor)[0], origin = that._eventOrigin;\n                that._eventOrigin = undefined;\n                return that.trigger(e.type, extend({\n                    type: e.type,\n                    item: e.item || this.element[0],\n                    target: anchor\n                }, origin ? { event: origin } : {}));\n            },\n            _popup: function () {\n                var that = this;\n                var overflowWrapper = that._overflowWrapper();\n                that._triggerProxy = proxy(that._triggerEvent, that);\n                that.popup = that.element.addClass('k-context-menu').kendoPopup({\n                    anchor: that.target || 'body',\n                    copyAnchorStyles: that.options.copyAnchorStyles,\n                    collision: that.options.popupCollision || 'fit',\n                    animation: that.options.animation,\n                    activate: that._triggerProxy,\n                    deactivate: that._triggerProxy,\n                    appendTo: overflowWrapper || that.options.appendTo,\n                    close: !overflowWrapper ? $.noop : function (e) {\n                        $(getChildPopups(e.sender.element, overflowWrapper)).each(function (i, p) {\n                            var popup = p.data(KENDOPOPUP);\n                            if (popup) {\n                                popup.close(true);\n                            }\n                        });\n                    }\n                }).data(KENDOPOPUP);\n                that._targetChild = contains(that.target[0], that.popup.element[0]);\n            }\n        });\n        ui.plugin(Menu);\n        ui.plugin(ContextMenu);\n    }(window.kendo.jQuery));\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));"]}